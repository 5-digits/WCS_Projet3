{% extends 'app/baptism_has_user/layout.html.twig' %}
{% trans_default_domain 'baptism_guest' %}
{% block content %}
    <h2>Guest Part</h2>
    <h3>Context: Visitor visit a baptism page via link (mainly to reserve on his table)</h3>

    <p>{{ baptism_has_user.user.firstName }} {{ baptism_has_user.user.lastName }} {{ 'inviting_guest' |trans }}</p>
    <p>{{ 'restaurant' |trans }} {{ baptism_has_user.baptism.restaurant.name|capitalize }}</p>
    <p>{{ baptism_has_user.baptism.restaurant.address }}</p>
    <p>{{ baptism_has_user.baptism.restaurant.postalCode }}</p>
    <p>{{ baptism_has_user.baptism.restaurant.city }}</p>
    <p>{{ baptism_has_user.baptism.service.name }}</p>
    <p>{{ baptism_has_user.baptism.date |date('d m Y') }}</p>
    <p>{{ 'number_of_guest.first_part' |trans }}</p>
    <p>{{ guestCount }}</p>
    <p>{{ 'number_of_guest.second_part' |trans }}</p>

    {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
        {{ form_start(form) }}
        {{ form_widget(form.guestCount) }}
        <button
                id="guestConfirm"
                name="confirm"
                type="button"
                class="btn btn-primary btn-lg"
                data-toggle="modal"
                data-target="#validationModal">{{ 'reserve' |trans }}
        </button>



        <div class="modal fade" id="validationModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    </div>
                    <div class="modal-body">
                        {{ 'validation.text' |trans}}
                        <span id="guestNumberToValidate"></span>
                        {{ 'people_at_restaurant' |trans }} {{ baptism_has_user.baptism.restaurant.name }}, {{ 'on.date' |trans }}
                        {{ baptism_has_user.baptism.date |date('d m Y') }}
                    </div>
                    <div class="modal-footer">
                        {{ form_row(form.validate) }}
                    </div>
                </div>
            </div>
        </div>
        {{ form_end(form) }}
    {% endif %}

{% endblock %}